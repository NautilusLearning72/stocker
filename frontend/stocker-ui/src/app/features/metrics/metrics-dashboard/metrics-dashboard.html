<div class="container-lg p-responsive">
  <!-- Header -->
  <div class="Subhead">
    <h2 class="Subhead-heading">Metrics Dashboard</h2>
    <div class="Subhead-description">System activity overview - key metrics showing what the trading system has been doing</div>
  </div>

  <!-- Controls -->
  <div class="d-flex flex-items-center flex-justify-between mt-3 flex-wrap gap-3">
    <!-- Time Range -->
    <div class="BtnGroup">
      <button
        *ngFor="let opt of hourOptions"
        class="BtnGroup-item"
        [class.selected]="selectedHours === opt.value"
        (click)="selectedHours = opt.value; onTimeRangeChange()">
        {{ opt.label }}
      </button>
    </div>

    <div class="d-flex flex-items-center gap-2">
      <!-- Live Toggle -->
      <div class="live-toggle">
        <mat-slide-toggle
          [(ngModel)]="isLive"
          (change)="onLiveToggle()"
          color="primary"
          class="live-switch">
          <span class="live-label">Live</span>
        </mat-slide-toggle>

        <!-- Connection Status -->
        <span *ngIf="isLive" class="badge connection-badge" [class]="'badge-' + connectionStatus">
          <mat-icon *ngIf="connectionStatus === 'connected'">wifi</mat-icon>
          <mat-icon *ngIf="connectionStatus === 'connecting'" class="spinning">sync</mat-icon>
          <mat-icon *ngIf="connectionStatus === 'disconnected'">wifi_off</mat-icon>
          {{ connectionStatus }}
        </span>
      </div>

      <!-- Refresh Button -->
      <button
        mat-icon-button
        (click)="refresh()"
        [disabled]="loadingSummary || loadingEvents"
        matTooltip="Refresh data"
        class="refresh-btn">
        <mat-icon>refresh</mat-icon>
      </button>
    </div>
  </div>

  <!-- Summary Section -->
  <div class="mt-4">
    <app-metrics-summary
      [summary]="summary"
      [loading]="loadingSummary">
    </app-metrics-summary>
  </div>

  <!-- Event Feed Section -->
  <div class="mt-5">
    <div class="Subhead">
      <h2 class="Subhead-heading">Event Feed</h2>
      <div class="Subhead-description">Detailed log of individual events - use filters to focus on specific categories or symbols</div>
    </div>
    <div class="Box mt-3">
      <app-event-feed
        [events]="events"
        [loading]="loadingEvents"
        [isLive]="isLive"
        (filtersChanged)="onFiltersChange($event)">
      </app-event-feed>
    </div>
  </div>
</div>
